<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <link rel="apple-touch-icon" sizes="180x180" href="icon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icon/favicon-16x16.png">
    <link rel="manifest" href="icon/site.webmanifest">
    <title>Trang c√° nh√¢n</title>

    <style>
        * { box-sizing: border-box; }

        body {
            margin: 0;
            font-family: "Poppins","Roboto",sans-serif;
            background: linear-gradient(135deg,#c9d6ff,#e2e2e2);
        }

        nav {
            background:#5d9bff;
            padding:12px;
        }

        nav a {
            color:white;
            text-decoration:none;
            font-weight:600;
        }

        .profile-card {
            background:#fff;
            width:430px;
            max-width:92%;
            margin:40px auto;
            padding:2.2rem 2.8rem;
            border-radius:22px;
            box-shadow:0 12px 30px rgba(0,0,0,.12);
        }

        /* ===== Avatar ===== */
        .avatar-container {
            text-align:center;
            margin-bottom:25px;
        }

        .avatar-wrapper {
            position:relative;
            width:120px;
            height:120px;
            margin:0 auto 10px;
            cursor:pointer;
        }

        #avatarPreview {
            width:100%;
            height:100%;
            border-radius:50%;
            object-fit:cover;
            border:3px solid #5d9bff;
            transition:.3s;
        }

        .avatar-wrapper:hover #avatarPreview {
            transform:scale(1.05);
        }

        .avatar-wrapper::after {
            content:"üì∑";
            position:absolute;
            bottom:6px;
            right:6px;
            background:#3b7cf5;
            color:#fff;
            padding:6px;
            border-radius:50%;
            font-size:.75rem;
        }

        /* ===== Form ===== */
        form { text-align:left; }

        h4 {
            margin:20px 0 10px;
            color:#333;
        }

        label {
            font-weight:500;
            display:block;
            margin-top:10px;
            margin-bottom:4px;
        }

        input,select {
            width:100%;
            padding:10px;
            border-radius:10px;
            border:1px solid #ccc;
            font-size:.95rem;
        }

        input:focus,select:focus {
            outline:none;
            border-color:#5d9bff;
            box-shadow:0 0 6px rgba(93,155,255,.35);
        }

        /* ===== Buttons ===== */
        button {
            cursor:pointer;
            border-radius:12px;
            border:none;
            font-weight:600;
            transition:.25s;
        }

        .btn-primary {
            width:100%;
            margin-top:20px;
            padding:13px;
            background:linear-gradient(135deg,#5d9bff,#3b7cf5);
            color:#fff;
        }

        .btn-primary:hover {
            transform:translateY(-2px);
            box-shadow:0 8px 20px rgba(93,155,255,.45);
        }

        .btn-outline {
            width:100%;
            padding:10px;
            background:#f3f6ff;
            color:#3b7cf5;
            margin-top:12px;
        }

        .btn-outline:hover {
            background:#e6ecff;
        }

        /* ===== Message ===== */
        #messageBox {
            margin-top:15px;
            padding:12px;
            border-radius:12px;
            font-size:.95rem;
            text-align:center;
        }

        #messageBox.success {
            background:#d4edda;
            color:#155724;
            border:1px solid #c3e6cb;
        }

        #messageBox.error {
            background:#f8d7da;
            color:#721c24;
            border:1px solid #f5c6cb;
        }

        textarea {
            width: 100%;
            padding: 10px;
            border-radius: 10px;
            border: 1px solid #ccc;
            resize: vertical;
            font-family: inherit;
        }

        /* ===== Intro Video ===== */
        .intro-wrapper {
            position: relative;
            width: 100%;
            border-radius: 16px;
            background: #f3f6ff;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: .25s;
        }

        .intro-wrapper:hover {
            background: #e6ecff;
        }

        #introPlaceholder {
            color: #3b7cf5;
            font-weight: 600;
        }

        .intro-wrapper::after {
            content: "üé•";
            position: absolute;
            bottom: 10px;
            right: 12px;
            background: #3b7cf5;
            color: #fff;
            padding: 6px;
            border-radius: 50%;
            font-size: .8rem;
        }

    </style>
</head>

<body>
<nav>
    <a href="home.html">‚Üê Trang ch·ªß</a>
</nav>

<div class="profile-card">

    <!-- Avatar -->
    <div class="avatar-container">
        <div class="avatar-wrapper" id="avatarClick">
            <img id="avatarPreview" src="/icon/default-avatar.png">
        </div>
        <input type="file" id="avatarFile" accept="image/*" hidden>
    </div>

    <h4>Video gi·ªõi thi·ªáu</h4>

    <div class="intro-container">

        <!-- Click v√†o ƒë√¢y ƒë·ªÉ m·ªü upload -->
        <div class="intro-wrapper" id="introClick">
            <video id="introPreview"
                   controls
                   style="width:100%; border-radius:16px; display:none">
            </video>

            <!-- Placeholder khi ch∆∞a c√≥ video -->
            <div id="introPlaceholder">
                üé• Nh·∫•n ƒë·ªÉ th√™m video gi·ªõi thi·ªáu
            </div>
        </div>

        <div id="introExpText"
             style="margin-top:6px; font-size:0.9rem; color:#666; display:none">
        </div>

        <div id="introUploadPanel" style="display:none; margin-top:12px">
            <input type="file" id="introFile" accept="video/*">

            <label>Th·ªùi h·∫°n (ng√†y)</label>
            <input type="number" id="introExpDay" min="1" value="7">

            <button type="button" id="uploadIntroBtn" class="btn-primary">
                ‚¨Ü Upload video gi·ªõi thi·ªáu
            </button>

            <button type="button"
                    id="removeIntroBtn"
                    class="btn-outline"
                    style="display:none">
                üóë X√≥a video gi·ªõi thi·ªáu
            </button>
        </div>

    </div>

    <hr style="margin:24px 0">

    <button id="toggleRestoreIntroBtn" class="btn-outline">
        üì¶ Video gi·ªõi thi·ªáu ƒë√£ x√≥a
    </button>

    <div id="restoreIntroPanel" style="display:none; margin-top:12px">
        <div id="restoreIntroList"></div>
    </div>


    <form id="profileForm">
        <h4>Th√¥ng tin c∆° b·∫£n</h4>

        <label>H·ªç</label>
        <input id="lastName" required>

        <label>T√™n</label>
        <input id="firstName" required>

        <label>Ti·ªÉu s·ª≠</label>
        <textarea id="bio"
                  rows="3"
                  placeholder="Gi·ªõi thi·ªáu ng·∫Øn v·ªÅ b·∫£n th√¢n..."></textarea>

        <label>Email</label>
        <input id="email" type="email" required>

        <label>S·ªë ƒëi·ªán tho·∫°i</label>
        <input id="phone">

        <button type="button" id="toggleExtraBtn" class="btn-outline">
            ‚åÑ Th√¥ng tin n√¢ng cao
        </button>

        <div id="extraInfo" style="display:none">
            <label>ƒê·ªãa ch·ªâ</label>
            <input id="address">

            <label>Ng√†y sinh</label>
            <input type="date" id="birthDate">

            <label>Gi·ªõi t√≠nh</label>
            <select id="gender">
                <option value="MALE">Nam</option>
                <option value="FEMALE">N·ªØ</option>
                <option value="UNKNOWN">Kh√°c</option>
            </select>
        </div>

        <button id="updateInfoBtn" class="btn-primary" type="submit">
            üíæ C·∫≠p nh·∫≠t th√¥ng tin
        </button>
    </form>

    <div id="messageBox"></div>
</div>

<script type="module" src="auth-utils.js"></script>
<script type="module" src="profile.js"></script>
</body>
</html>
