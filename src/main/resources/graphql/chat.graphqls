extend type Query {
    roomsChat(page:Int!, size:Int!):ListResponse_RoomChat
    messages(chatRoomId:Int!,  page:Int!, size:Int!):ListResponse_Message
    userForAddRoomChat(chatRoomId:ID!, keyword:String!, page:Int!, size:Int!):ListResponse_UserForAddChatRoom
    members(chatRoomId:ID!, page:Int!, size:Int!):ListResponse_Member
    usersRecentMessage:[UserRecentMessage]
    usersForCreateRoomChat(keyword:String!, page:Int!, size:Int!):ListResponse_UserForCreateChatRoom
}

extend type Mutation {
    updateChatRoom(request:UpdateChatRoomRequest!):GraphqlResponse_String
    addMemberForChatRoom(request:UserForAddChatRoomRequest):GraphqlResponse_String
    leaveChatRoom(chatRoomId:ID!):GraphqlResponse_String
    createGroupChat(request:GroupChatRequest):GroupChatResponse
}

type ListResponse_RoomChat{
    data:[ChatRoom]
    pageInfo:PageInfo
}

type ChatRoom{
    chatRoomId:ID!
    detail:ChatRoomDetail
    members:[UserDTO]!
}

type ChatRoomDetail{
    roomName:String
    description:String
    lastMessagePreview:String!
    lastMessageAt:String!
}

type ListResponse_Message{
    data:[Message]
    pageInfo:PageInfo
}

type Message{
    id:ID!
    text:String
    createdAt:String!

    messageMedias:[String]
    user:UserDTO!
    isMine:Boolean!
}

input UpdateChatRoomRequest{
    chatRoomId:ID!
    chatRoomName:String
    chatRoomDescription:String
}


type ListResponse_UserForAddChatRoom{
    data:[UserForAddChatRoom]
    pageInfo:PageInfo!
}

type UserForAddChatRoom{
    userId:ID!
    inRoom:Boolean!

    userForChatRoom:UserDTO!
    isFollowing:Boolean!
}

input UserForAddChatRoomRequest{
    memberId:ID!
    chatRoomId:ID!
}

type ListResponse_Member{
    data:[MemberOfChatRoom]
    pageInfo:PageInfo!
}

type MemberOfChatRoom{
    userId:ID!
    createdAt:String!

    user:UserDTO
}

type UserRecentMessage{
    id:ID!
    user:UserDTO
}

type ListResponse_UserForCreateChatRoom{
    data:[UserForCreateChatRoom]
    pageInfo:PageInfo
}

type UserForCreateChatRoom{
    userId:ID!

    user:UserDTO
    isFollowing:Boolean!
}

input GroupChatRequest{
    memberIds:[ID]!
    roomName:String
    roomDescription:String
}

type GroupChat{
    chatRoomId:ID!
    roomName:String
    roomDescription:String
    lastMessagePreview:String
    lastMessageAt:String
}


type GroupChatResponse {
    success: Boolean!
    message: String!
    data: GroupChat
}
